<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=XGMkxXUZTA64h2imyzu79g);ol{margin:0;padding:0}table td,table th{padding:0}.c6{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Roboto Mono";font-style:normal}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c3{font-size:9pt;font-family:"Roboto Mono";color:#188038;font-weight:400}.c0{font-size:9pt;font-family:"Roboto Mono";color:#37474f;font-weight:400}.c11{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c4{font-size:9pt;font-weight:400;font-family:"Roboto Mono"}.c10{text-decoration:none;vertical-align:baseline;font-style:normal}.c8{color:#1967d2}.c7{color:#b80672}.c9{color:#c5221f}.c5{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c11 doc-content"><p class="c1 c5"><span class="c6"></span></p><p class="c1"><span>&#60419;</span><span class="c0">&lt;!DOCTYPE</span><span class="c4">&nbsp;</span><span class="c0">html&gt;</span></p><p class="c1"><span class="c0">&lt;html</span><span class="c4">&nbsp;</span><span class="c0">lang=</span><span class="c3">&quot;</span><span class="c0">sv</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c0">&lt;head&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;meta</span><span class="c4">&nbsp;</span><span class="c0">charset=</span><span class="c3">&quot;</span><span class="c0">UTF-8</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;meta</span><span class="c4">&nbsp;</span><span class="c0">name=</span><span class="c3">&quot;</span><span class="c0">viewport</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">content=</span><span class="c3">&quot;</span><span class="c0">width=device-width,</span><span class="c4">&nbsp;</span><span class="c0">initial-scale=</span><span class="c4 c9">1</span><span class="c0">.</span><span class="c4 c9">0</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;title&gt;Bildredigerare</span><span class="c4">&nbsp;</span><span class="c0">f&ouml;r</span><span class="c4">&nbsp;</span><span class="c0">Flera</span><span class="c4">&nbsp;</span><span class="c0">Bilder&lt;/title&gt;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- Ladda in Tailwind CSS f&ouml;r snabb och modern styling --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;script</span><span class="c4">&nbsp;</span><span class="c0">src=</span><span class="c3">&quot;</span><span class="c0">https://cdn.tailwindcss.com</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/script&gt;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- Ladda in Lucide Icons f&ouml;r ikoner --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;script</span><span class="c4">&nbsp;</span><span class="c0">src=</span><span class="c3">&quot;</span><span class="c0">https://unpkg.com/lucide/dist/umd/lucide.min.js</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/script&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- Google Fonts: Inter --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;link</span><span class="c4">&nbsp;</span><span class="c0">rel=</span><span class="c3">&quot;</span><span class="c0">preconnect</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">href=</span><span class="c3">&quot;</span><span class="c0">https://fonts.googleapis.com</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;link</span><span class="c4">&nbsp;</span><span class="c0">rel=</span><span class="c3">&quot;</span><span class="c0">preconnect</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">href=</span><span class="c3">&quot;</span><span class="c0">https://fonts.gstatic.com</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">crossorigin&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;link</span><span class="c4">&nbsp;</span><span class="c0">href=</span><span class="c3">&quot;</span><span class="c0">https://fonts.googleapis.com/css2?family=Inter:wght@</span><span class="c4 c9">400</span><span class="c0">;</span><span class="c4 c9">500</span><span class="c0">;</span><span class="c4 c9">600</span><span class="c0">;</span><span class="c4 c9">700</span><span class="c0">&amp;display=swap</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">rel=</span><span class="c3">&quot;</span><span class="c0">stylesheet</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;style&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">/*</span><span class="c4">&nbsp;</span><span class="c0">Anpassad</span><span class="c4">&nbsp;</span><span class="c0">styling</span><span class="c4">&nbsp;</span><span class="c0">f&ouml;r</span><span class="c4">&nbsp;</span><span class="c0">applikationen</span><span class="c4">&nbsp;</span><span class="c0">*/</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">body</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">font-family:</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">Inter</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">sans-serif;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">overscroll-behavior:</span><span class="c4">&nbsp;</span><span class="c0">none;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">.tab.active</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">background-color:</span><span class="c4">&nbsp;</span><span class="c0">#</span><span class="c4 c9">374151</span><span class="c0">;</span><span class="c4">&nbsp;</span><span class="c0">/*</span><span class="c4">&nbsp;</span><span class="c0">gray-700</span><span class="c4">&nbsp;</span><span class="c0">*/</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">border-bottom-color:</span><span class="c4">&nbsp;</span><span class="c0">#</span><span class="c4 c9">3b82f6</span><span class="c0">;</span><span class="c4">&nbsp;</span><span class="c0">/*</span><span class="c4">&nbsp;</span><span class="c0">blue-500</span><span class="c4">&nbsp;</span><span class="c0">*/</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">#file-input</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">display:</span><span class="c4">&nbsp;</span><span class="c0">none;</span><span class="c4">&nbsp;</span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">canvas</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">max-width:</span><span class="c4">&nbsp;</span><span class="c4 c9">100</span><span class="c0">%;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">max-height:</span><span class="c4">&nbsp;</span><span class="c4 c9">100</span><span class="c0">%;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">object-fit:</span><span class="c4">&nbsp;</span><span class="c0">contain;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">border-radius:</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">.</span><span class="c4 c9">5rem</span><span class="c0">;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">#workspace.cropping</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">cursor:</span><span class="c4">&nbsp;</span><span class="c0">crosshair;</span><span class="c4">&nbsp;</span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">::-webkit-scrollbar</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">width:</span><span class="c4">&nbsp;</span><span class="c4 c9">8px</span><span class="c0">;</span><span class="c4">&nbsp;</span><span class="c0">height:</span><span class="c4">&nbsp;</span><span class="c4 c9">8px</span><span class="c0">;</span><span class="c4">&nbsp;</span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">::-webkit-scrollbar-track</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">background:</span><span class="c4">&nbsp;</span><span class="c0">#</span><span class="c4 c9">1f2937</span><span class="c0">;</span><span class="c4">&nbsp;</span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">::-webkit-scrollbar-thumb</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">background:</span><span class="c4">&nbsp;</span><span class="c0">#</span><span class="c4 c9">4b5563</span><span class="c0">;</span><span class="c4">&nbsp;</span><span class="c0">border-radius:</span><span class="c4">&nbsp;</span><span class="c4 c9">10px</span><span class="c0">;</span><span class="c4">&nbsp;</span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">::-webkit-scrollbar-thumb:hover</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">background:</span><span class="c4">&nbsp;</span><span class="c0">#</span><span class="c4 c9">6b7280</span><span class="c0">;</span><span class="c4">&nbsp;</span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">.tool-button.active</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">background-color:</span><span class="c4">&nbsp;</span><span class="c0">#</span><span class="c4 c9">3b82f6</span><span class="c0">;</span><span class="c4">&nbsp;</span><span class="c0">color:</span><span class="c4">&nbsp;</span><span class="c0">white;</span><span class="c4">&nbsp;</span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;/style&gt;</span></p><p class="c1"><span class="c0">&lt;/head&gt;</span></p><p class="c1"><span class="c0">&lt;body</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">bg-gray-900</span><span class="c4">&nbsp;</span><span class="c0">text-gray-200</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">flex-col</span><span class="c4">&nbsp;</span><span class="c0">h-screen</span><span class="c4">&nbsp;</span><span class="c0">overflow-hidden</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- Huvud-header --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;header</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">bg-gray-800</span><span class="c4">&nbsp;</span><span class="c0">border-b</span><span class="c4">&nbsp;</span><span class="c0">border-gray-700</span><span class="c4">&nbsp;</span><span class="c0">p-3</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">justify-between</span><span class="c4">&nbsp;</span><span class="c0">shadow-md</span><span class="c4">&nbsp;</span><span class="c0">z-20</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">gap-3</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">image</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">text-blue-400</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;h1</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">text-xl</span><span class="c4">&nbsp;</span><span class="c0">font-bold</span><span class="c4">&nbsp;</span><span class="c0">text-gray-100</span><span class="c3">&quot;</span><span class="c0">&gt;Bildredigerare</span><span class="c4">&nbsp;</span><span class="c0">Pro&lt;/h1&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;label</span><span class="c4">&nbsp;</span><span class="c0">for=</span><span class="c3">&quot;</span><span class="c0">file-input</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">bg-blue-600</span><span class="c4">&nbsp;</span><span class="c0">hover:bg-blue-700</span><span class="c4">&nbsp;</span><span class="c0">text-white</span><span class="c4">&nbsp;</span><span class="c0">font-semibold</span><span class="c4">&nbsp;</span><span class="c0">py-2</span><span class="c4">&nbsp;</span><span class="c0">px-4</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">shadow-sm</span><span class="c4">&nbsp;</span><span class="c0">cursor-pointer</span><span class="c4">&nbsp;</span><span class="c0">transition-colors</span><span class="c4">&nbsp;</span><span class="c0">duration-200</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">plus-circle</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-5</span><span class="c4">&nbsp;</span><span class="c0">h-5</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">L&auml;gg</span><span class="c4">&nbsp;</span><span class="c0">till</span><span class="c4">&nbsp;</span><span class="c0">bilder</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/label&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;input</span><span class="c4">&nbsp;</span><span class="c0">type=</span><span class="c3">&quot;</span><span class="c0">file</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">file-input</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">accept=</span><span class="c3">&quot;</span><span class="c0">image/*</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">multiple&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;/header&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- Huvudlayout --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">flex-1</span><span class="c4">&nbsp;</span><span class="c0">overflow-hidden</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- V&auml;nster sidopanel --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;aside</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">editor-sidebar</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-80</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-800</span><span class="c4">&nbsp;</span><span class="c0">p-4</span><span class="c4">&nbsp;</span><span class="c0">flex-shrink-0</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">flex-col</span><span class="c4">&nbsp;</span><span class="c0">gap-6</span><span class="c4">&nbsp;</span><span class="c0">overflow-y-auto</span><span class="c4">&nbsp;</span><span class="c0">shadow-lg</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">no-image-selected-message</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">text-center</span><span class="c4">&nbsp;</span><span class="c0">text-gray-400</span><span class="c4">&nbsp;</span><span class="c0">mt-8</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">image-off</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">mx-auto</span><span class="c4">&nbsp;</span><span class="c0">w-16</span><span class="c4">&nbsp;</span><span class="c0">h-16</span><span class="c4">&nbsp;</span><span class="c0">text-gray-600</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;p</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">mt-4</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c3">&quot;</span><span class="c0">&gt;Ingen</span><span class="c4">&nbsp;</span><span class="c0">bild</span><span class="c4">&nbsp;</span><span class="c0">vald&lt;/p&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;p</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">text-sm</span><span class="c3">&quot;</span><span class="c0">&gt;L&auml;gg</span><span class="c4">&nbsp;</span><span class="c0">till</span><span class="c4">&nbsp;</span><span class="c0">en</span><span class="c4">&nbsp;</span><span class="c0">bild</span><span class="c4">&nbsp;</span><span class="c0">f&ouml;r</span><span class="c4">&nbsp;</span><span class="c0">att</span><span class="c4">&nbsp;</span><span class="c0">b&ouml;rja</span><span class="c4">&nbsp;</span><span class="c0">redigera.&lt;/p&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">tools-container</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">hidden</span><span class="c4">&nbsp;</span><span class="c0">flex-col</span><span class="c4">&nbsp;</span><span class="c0">gap-6</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4 c7">&lt;!-- Verktyg --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;h3</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">text-lg</span><span class="c4">&nbsp;</span><span class="c0">font-semibold</span><span class="c4">&nbsp;</span><span class="c0">mb-3</span><span class="c4">&nbsp;</span><span class="c0">border-b</span><span class="c4">&nbsp;</span><span class="c0">border-gray-600</span><span class="c4">&nbsp;</span><span class="c0">pb-2</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">wand-2</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-5</span><span class="c4">&nbsp;</span><span class="c0">h-5</span><span class="c4">&nbsp;</span><span class="c0">text-gray-400</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;Verktyg&lt;/h3&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">grid</span><span class="c4">&nbsp;</span><span class="c0">grid-cols-2</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;button</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">crop-tool-btn</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">tool-button</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-700</span><span class="c4">&nbsp;</span><span class="c0">hover:bg-gray-600</span><span class="c4">&nbsp;</span><span class="c0">text-gray-300</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">py-2</span><span class="c4">&nbsp;</span><span class="c0">px-3</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">justify-center</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c4">&nbsp;</span><span class="c0">transition-colors</span><span class="c4">&nbsp;</span><span class="c0">duration-200</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">crop</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-4</span><span class="c4">&nbsp;</span><span class="c0">h-4</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;Besk&auml;r</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/button&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;button</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">focus-tool-btn</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">tool-button</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-700</span><span class="c4">&nbsp;</span><span class="c0">hover:bg-gray-600</span><span class="c4">&nbsp;</span><span class="c0">text-gray-300</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">py-2</span><span class="c4">&nbsp;</span><span class="c0">px-3</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">justify-center</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c4">&nbsp;</span><span class="c0">transition-colors</span><span class="c4">&nbsp;</span><span class="c0">duration-200</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">aperture</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-4</span><span class="c4">&nbsp;</span><span class="c0">h-4</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;Fokus</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/button&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- Dynamiska verktygskontroller --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">crop-controls</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">hidden</span><span class="c4">&nbsp;</span><span class="c0">mt-4</span><span class="c4">&nbsp;</span><span class="c0">p-3</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-700/</span><span class="c4 c9">50</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;p</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">text-sm</span><span class="c4">&nbsp;</span><span class="c0">text-center</span><span class="c4">&nbsp;</span><span class="c0">text-gray-300</span><span class="c4">&nbsp;</span><span class="c0">mb-2</span><span class="c3">&quot;</span><span class="c0">&gt;Dra</span><span class="c4">&nbsp;</span><span class="c0">p&aring;</span><span class="c4">&nbsp;</span><span class="c0">bilden</span><span class="c4">&nbsp;</span><span class="c0">f&ouml;r</span><span class="c4">&nbsp;</span><span class="c0">att</span><span class="c4">&nbsp;</span><span class="c0">besk&auml;ra&lt;/p&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">grid</span><span class="c4">&nbsp;</span><span class="c0">grid-cols-2</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">&lt;button</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">apply-crop-btn</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">bg-green-600</span><span class="c4">&nbsp;</span><span class="c0">hover:bg-green-700</span><span class="c4">&nbsp;</span><span class="c0">text-white</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">py-2</span><span class="c4">&nbsp;</span><span class="c0">px-3</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">justify-center</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">check</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-4</span><span class="c4">&nbsp;</span><span class="c0">h-4</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;Anv&auml;nd</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/button&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;button</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">cancel-crop-btn</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">bg-red-600</span><span class="c4">&nbsp;</span><span class="c0">hover:bg-red-700</span><span class="c4">&nbsp;</span><span class="c0">text-white</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">py-2</span><span class="c4">&nbsp;</span><span class="c0">px-3</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">justify-center</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">x</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-4</span><span class="c4">&nbsp;</span><span class="c0">h-4</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;Avbryt</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/button&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">focus-controls</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">hidden</span><span class="c4">&nbsp;</span><span class="c0">mt-4</span><span class="c4">&nbsp;</span><span class="c0">p-3</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-700/</span><span class="c4 c9">50</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">space-y-4</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;p</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">text-sm</span><span class="c4">&nbsp;</span><span class="c0">text-center</span><span class="c4">&nbsp;</span><span class="c0">text-gray-300</span><span class="c4">&nbsp;</span><span class="c0">mb-2</span><span class="c3">&quot;</span><span class="c0">&gt;Klicka</span><span class="c4">&nbsp;</span><span class="c0">p&aring;</span><span class="c4">&nbsp;</span><span class="c0">bilden</span><span class="c4">&nbsp;</span><span class="c0">f&ouml;r</span><span class="c4">&nbsp;</span><span class="c0">att</span><span class="c4">&nbsp;</span><span class="c0">s&auml;tta</span><span class="c4">&nbsp;</span><span class="c0">fokus&lt;/p&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;label</span><span class="c4">&nbsp;</span><span class="c0">for=</span><span class="c3">&quot;</span><span class="c0">focus-radius</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">block</span><span class="c4">&nbsp;</span><span class="c0">text-sm</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">text-gray-300</span><span class="c4">&nbsp;</span><span class="c0">mb-1</span><span class="c3">&quot;</span><span class="c0">&gt;Fokusradie&lt;/label&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;input</span><span class="c4">&nbsp;</span><span class="c0">type=</span><span class="c3">&quot;</span><span class="c0">range</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">focus-radius</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">min=</span><span class="c3">&quot;</span><span class="c4 c9">1</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">max=</span><span class="c3">&quot;</span><span class="c4 c9">500</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">value=</span><span class="c3">&quot;</span><span class="c4 c9">150</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-full</span><span class="c4">&nbsp;</span><span class="c0">h-2</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-600</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">appearance-none</span><span class="c4">&nbsp;</span><span class="c0">cursor-pointer</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;label</span><span class="c4">&nbsp;</span><span class="c0">for=</span><span class="c3">&quot;</span><span class="c0">focus-blur</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">block</span><span class="c4">&nbsp;</span><span class="c0">text-sm</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">text-gray-300</span><span class="c4">&nbsp;</span><span class="c0">mb-1</span><span class="c3">&quot;</span><span class="c0">&gt;Bakgrundsosk&auml;rpa&lt;/label&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;input</span><span class="c4">&nbsp;</span><span class="c0">type=</span><span class="c3">&quot;</span><span class="c0">range</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">focus-blur</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">min=</span><span class="c3">&quot;</span><span class="c4 c9">0</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">max=</span><span class="c3">&quot;</span><span class="c4 c9">20</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">value=</span><span class="c3">&quot;</span><span class="c4 c9">5</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-full</span><span class="c4">&nbsp;</span><span class="c0">h-2</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-600</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">appearance-none</span><span class="c4">&nbsp;</span><span class="c0">cursor-pointer</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- Justeringar --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;h3</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">text-lg</span><span class="c4">&nbsp;</span><span class="c0">font-semibold</span><span class="c4">&nbsp;</span><span class="c0">mb-3</span><span class="c4">&nbsp;</span><span class="c0">border-b</span><span class="c4">&nbsp;</span><span class="c0">border-gray-600</span><span class="c4">&nbsp;</span><span class="c0">pb-2</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">sliders-horizontal</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-5</span><span class="c4">&nbsp;</span><span class="c0">h-5</span><span class="c4">&nbsp;</span><span class="c0">text-gray-400</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;Justeringar&lt;/h3&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">space-y-4</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- Reglage f&ouml;r filter... --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">filter-control</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;label</span><span class="c4">&nbsp;</span><span class="c0">for=</span><span class="c3">&quot;</span><span class="c0">brightness</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">block</span><span class="c4">&nbsp;</span><span class="c0">text-sm</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">text-gray-300</span><span class="c4">&nbsp;</span><span class="c0">mb-1</span><span class="c3">&quot;</span><span class="c0">&gt;Ljusstyrka&lt;/label&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;input</span><span class="c4">&nbsp;</span><span class="c0">type=</span><span class="c3">&quot;</span><span class="c0">range</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">brightness</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">min=</span><span class="c3">&quot;</span><span class="c4 c9">-100</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">max=</span><span class="c3">&quot;</span><span class="c4 c9">100</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">value=</span><span class="c3">&quot;</span><span class="c4 c9">0</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-full</span><span class="c4">&nbsp;</span><span class="c0">h-2</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-600</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">appearance-none</span><span class="c4">&nbsp;</span><span class="c0">cursor-pointer</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">filter-control</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;label</span><span class="c4">&nbsp;</span><span class="c0">for=</span><span class="c3">&quot;</span><span class="c0">contrast</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">block</span><span class="c4">&nbsp;</span><span class="c0">text-sm</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">text-gray-300</span><span class="c4">&nbsp;</span><span class="c0">mb-1</span><span class="c3">&quot;</span><span class="c0">&gt;Kontrast&lt;/label&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;input</span><span class="c4">&nbsp;</span><span class="c0">type=</span><span class="c3">&quot;</span><span class="c0">range</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">contrast</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">min=</span><span class="c3">&quot;</span><span class="c4 c9">-100</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">max=</span><span class="c3">&quot;</span><span class="c4 c9">100</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">value=</span><span class="c3">&quot;</span><span class="c4 c9">0</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-full</span><span class="c4">&nbsp;</span><span class="c0">h-2</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-600</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">appearance-none</span><span class="c4">&nbsp;</span><span class="c0">cursor-pointer</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">filter-control</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;label</span><span class="c4">&nbsp;</span><span class="c0">for=</span><span class="c3">&quot;</span><span class="c0">saturate</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">block</span><span class="c4">&nbsp;</span><span class="c0">text-sm</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">text-gray-300</span><span class="c4">&nbsp;</span><span class="c0">mb-1</span><span class="c3">&quot;</span><span class="c0">&gt;M&auml;ttnad&lt;/label&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;input</span><span class="c4">&nbsp;</span><span class="c0">type=</span><span class="c3">&quot;</span><span class="c0">range</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">saturate</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">min=</span><span class="c3">&quot;</span><span class="c4 c9">0</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">max=</span><span class="c3">&quot;</span><span class="c4 c9">200</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">value=</span><span class="c3">&quot;</span><span class="c4 c9">100</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-full</span><span class="c4">&nbsp;</span><span class="c0">h-2</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-600</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">appearance-none</span><span class="c4">&nbsp;</span><span class="c0">cursor-pointer</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">filter-control</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;label</span><span class="c4">&nbsp;</span><span class="c0">for=</span><span class="c3">&quot;</span><span class="c0">grayscale</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">block</span><span class="c4">&nbsp;</span><span class="c0">text-sm</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">text-gray-300</span><span class="c4">&nbsp;</span><span class="c0">mb-1</span><span class="c3">&quot;</span><span class="c0">&gt;Gr&aring;skala&lt;/label&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;input</span><span class="c4">&nbsp;</span><span class="c0">type=</span><span class="c3">&quot;</span><span class="c0">range</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">grayscale</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">min=</span><span class="c3">&quot;</span><span class="c4 c9">0</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">max=</span><span class="c3">&quot;</span><span class="c4 c9">100</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">value=</span><span class="c3">&quot;</span><span class="c4 c9">0</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-full</span><span class="c4">&nbsp;</span><span class="c0">h-2</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-600</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">appearance-none</span><span class="c4">&nbsp;</span><span class="c0">cursor-pointer</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">filter-control</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;label</span><span class="c4">&nbsp;</span><span class="c0">for=</span><span class="c3">&quot;</span><span class="c0">sepia</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">block</span><span class="c4">&nbsp;</span><span class="c0">text-sm</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">text-gray-300</span><span class="c4">&nbsp;</span><span class="c0">mb-1</span><span class="c3">&quot;</span><span class="c0">&gt;Sepia&lt;/label&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;input</span><span class="c4">&nbsp;</span><span class="c0">type=</span><span class="c3">&quot;</span><span class="c0">range</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">sepia</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">min=</span><span class="c3">&quot;</span><span class="c4 c9">0</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">max=</span><span class="c3">&quot;</span><span class="c4 c9">100</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">value=</span><span class="c3">&quot;</span><span class="c4 c9">0</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-full</span><span class="c4">&nbsp;</span><span class="c0">h-2</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-600</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">appearance-none</span><span class="c4">&nbsp;</span><span class="c0">cursor-pointer</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- &Aring;tg&auml;rder --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;h3</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">text-lg</span><span class="c4">&nbsp;</span><span class="c0">font-semibold</span><span class="c4">&nbsp;</span><span class="c0">mb-3</span><span class="c4">&nbsp;</span><span class="c0">border-b</span><span class="c4">&nbsp;</span><span class="c0">border-gray-600</span><span class="c4">&nbsp;</span><span class="c0">pb-2</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">settings-2</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-5</span><span class="c4">&nbsp;</span><span class="c0">h-5</span><span class="c4">&nbsp;</span><span class="c0">text-gray-400</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;&Aring;tg&auml;rder&lt;/h3&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">grid</span><span class="c4">&nbsp;</span><span class="c0">grid-cols-2</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;button</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">reset-filters-btn</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">bg-yellow-600</span><span class="c4">&nbsp;</span><span class="c0">hover:bg-yellow-700</span><span class="c4">&nbsp;</span><span class="c0">text-white</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">py-2</span><span class="c4">&nbsp;</span><span class="c0">px-3</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">justify-center</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c4">&nbsp;</span><span class="c0">transition-colors</span><span class="c4">&nbsp;</span><span class="c0">duration-200</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">rotate-cw</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-4</span><span class="c4">&nbsp;</span><span class="c0">h-4</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;&Aring;terst&auml;ll</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/button&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;button</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">download-btn</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">bg-green-600</span><span class="c4">&nbsp;</span><span class="c0">hover:bg-green-700</span><span class="c4">&nbsp;</span><span class="c0">text-white</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">py-2</span><span class="c4">&nbsp;</span><span class="c0">px-3</span><span class="c4">&nbsp;</span><span class="c0">rounded-lg</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">justify-center</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c4">&nbsp;</span><span class="c0">transition-colors</span><span class="c4">&nbsp;</span><span class="c0">duration-200</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">download</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-4</span><span class="c4">&nbsp;</span><span class="c0">h-4</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;Spara</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/button&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/aside&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- Huvudinneh&aring;ll --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;main</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">flex-1</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">flex-col</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-900</span><span class="c4">&nbsp;</span><span class="c0">overflow-hidden</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- Flik-rad --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">tabs-container</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">flex-shrink-0</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-800</span><span class="c4">&nbsp;</span><span class="c0">border-b</span><span class="c4">&nbsp;</span><span class="c0">border-gray-700</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">tabs</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4 c7">&lt;!-- Arbetsyta --&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">workspace</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">flex-1</span><span class="c4">&nbsp;</span><span class="c0">p-4</span><span class="c4">&nbsp;</span><span class="c0">bg-gray-900</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">justify-center</span><span class="c4">&nbsp;</span><span class="c0">overflow-auto</span><span class="c4">&nbsp;</span><span class="c0">relative</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">&lt;div</span><span class="c4">&nbsp;</span><span class="c0">id=</span><span class="c3">&quot;</span><span class="c0">welcome-message</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">text-center</span><span class="c4">&nbsp;</span><span class="c0">text-gray-500</span><span class="c3">&quot;</span><span class="c0">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">image-plus</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">mx-auto</span><span class="c4">&nbsp;</span><span class="c0">w-24</span><span class="c4">&nbsp;</span><span class="c0">h-24</span><span class="c4">&nbsp;</span><span class="c0">text-gray-700</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;h2</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">mt-4</span><span class="c4">&nbsp;</span><span class="c0">text-2xl</span><span class="c4">&nbsp;</span><span class="c0">font-bold</span><span class="c3">&quot;</span><span class="c0">&gt;V&auml;lkommen</span><span class="c4">&nbsp;</span><span class="c0">till</span><span class="c4">&nbsp;</span><span class="c0">Bildredigeraren!&lt;/h2&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;p</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">mt-2</span><span class="c4">&nbsp;</span><span class="c0">text-lg</span><span class="c3">&quot;</span><span class="c0">&gt;Klicka</span><span class="c4">&nbsp;</span><span class="c0">p&aring;</span><span class="c4">&nbsp;</span><span class="c3">&quot;</span><span class="c0">L&auml;gg</span><span class="c4">&nbsp;</span><span class="c0">till</span><span class="c4">&nbsp;</span><span class="c0">bilder</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">f&ouml;r</span><span class="c4">&nbsp;</span><span class="c0">att</span><span class="c4">&nbsp;</span><span class="c0">komma</span><span class="c4">&nbsp;</span><span class="c0">ig&aring;ng.&lt;/p&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">&lt;/main&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;/div&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;script&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">window.addEventListener(</span><span class="c3">&#39;</span><span class="c0">load</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">()</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">lucide.createIcons();</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">DOM-referenser</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">fileInput</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">file-input</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">tabsContainer</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">tabs</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">workspace</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">workspace</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">welcomeMessage</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">welcome-message</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">noImageMessage</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">no-image-selected-message</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">toolsContainer</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">tools-container</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">cropToolBtn</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">crop-tool-btn</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">focusToolBtn</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">focus-tool-btn</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">cropControls</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">crop-controls</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">focusControls</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">focus-controls</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">applyCropBtn</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">apply-crop-btn</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">cancelCropBtn</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">cancel-crop-btn</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">focusRadiusSlider</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">focus-radius</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">focusBlurSlider</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">focus-blur</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">resetBtn</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">reset-filters-btn</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">downloadBtn</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">download-btn</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">Applikationens</span><span class="c4">&nbsp;</span><span class="c0">tillst&aring;nd</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">let</span><span class="c4">&nbsp;</span><span class="c0">appState</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">images:</span><span class="c4">&nbsp;</span><span class="c0">[],</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeImageId:</span><span class="c4">&nbsp;</span><span class="c0">null,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeTool:</span><span class="c4">&nbsp;</span><span class="c0">null,</span><span class="c4">&nbsp;</span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">crop</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">focus</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">or</span><span class="c4">&nbsp;</span><span class="c0">null</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">cropBox:</span><span class="c4">&nbsp;</span><span class="c0">null,</span><span class="c4">&nbsp;</span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">{startX,</span><span class="c4">&nbsp;</span><span class="c0">startY,</span><span class="c4">&nbsp;</span><span class="c0">endX,</span><span class="c4">&nbsp;</span><span class="c0">endY}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">isCropping:</span><span class="c4">&nbsp;</span><span class="c0">false,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">};</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">----</span><span class="c4">&nbsp;</span><span class="c0">H&Auml;NDELSEHANTERARE</span><span class="c4">&nbsp;</span><span class="c0">----</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">fileInput.addEventListener(</span><span class="c3">&#39;</span><span class="c0">change</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">handleImageUpload);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">[FIX]</span><span class="c4">&nbsp;</span><span class="c0">Korrekt</span><span class="c4">&nbsp;</span><span class="c0">h&auml;ndelsehanterare</span><span class="c4">&nbsp;</span><span class="c0">f&ouml;r</span><span class="c4">&nbsp;</span><span class="c0">filterreglage</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">document.querySelectorAll(</span><span class="c3">&#39;</span><span class="c0">.filter-control</span><span class="c4">&nbsp;</span><span class="c0">input</span><span class="c3">&#39;</span><span class="c0">).forEach(input</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">input.addEventListener(</span><span class="c3">&#39;</span><span class="c0">input</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">()</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">updateFiltersFromUI();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">redrawActiveCanvas();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">});</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">});</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">resetBtn.addEventListener(</span><span class="c3">&#39;</span><span class="c0">click</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">resetActiveImage);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">downloadBtn.addEventListener(</span><span class="c3">&#39;</span><span class="c0">click</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">downloadActiveImage);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">Verktygsknappar</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">cropToolBtn.addEventListener(</span><span class="c3">&#39;</span><span class="c0">click</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">()</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">toggleTool(</span><span class="c3">&#39;</span><span class="c0">crop</span><span class="c3">&#39;</span><span class="c0">));</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">focusToolBtn.addEventListener(</span><span class="c3">&#39;</span><span class="c0">click</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">()</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">toggleTool(</span><span class="c3">&#39;</span><span class="c0">focus</span><span class="c3">&#39;</span><span class="c0">));</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">Besk&auml;rningskontroller</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">applyCropBtn.addEventListener(</span><span class="c3">&#39;</span><span class="c0">click</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">applyCrop);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">cancelCropBtn.addEventListener(</span><span class="c3">&#39;</span><span class="c0">click</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">()</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">toggleTool(</span><span class="c3">&#39;</span><span class="c0">crop</span><span class="c3">&#39;</span><span class="c0">));</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">Fokuskontroller</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">focusRadiusSlider.addEventListener(</span><span class="c3">&#39;</span><span class="c0">input</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">()</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">redrawActiveCanvas());</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">focusBlurSlider.addEventListener(</span><span class="c3">&#39;</span><span class="c0">input</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">()</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">redrawActiveCanvas());</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">H&auml;ndelselyssnare</span><span class="c4">&nbsp;</span><span class="c0">f&ouml;r</span><span class="c4">&nbsp;</span><span class="c0">arbetsytan</span><span class="c4">&nbsp;</span><span class="c0">(besk&auml;rning</span><span class="c4">&nbsp;</span><span class="c0">och</span><span class="c4">&nbsp;</span><span class="c0">fokus)</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">workspace.addEventListener(</span><span class="c3">&#39;</span><span class="c0">mousedown</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">handleWorkspaceMouseDown);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">workspace.addEventListener(</span><span class="c3">&#39;</span><span class="c0">mousemove</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">handleWorkspaceMouseMove);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">workspace.addEventListener(</span><span class="c3">&#39;</span><span class="c0">mouseup</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">handleWorkspaceMouseUp);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">workspace.addEventListener(</span><span class="c3">&#39;</span><span class="c0">click</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">handleWorkspaceClick);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">----</span><span class="c4">&nbsp;</span><span class="c0">FUNKTIONER</span><span class="c4">&nbsp;</span><span class="c0">----</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">handleImageUpload(e)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">files</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">e.target.files;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(files.length</span><span class="c4">&nbsp;</span><span class="c0">&gt;</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">)</span><span class="c4">&nbsp;</span><span class="c0">welcomeMessage.classList.add(</span><span class="c3">&#39;</span><span class="c0">hidden</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Array.from(files).forEach(file</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(appState.images.some(img</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">img.name</span><span class="c4">&nbsp;</span><span class="c0">===</span><span class="c4">&nbsp;</span><span class="c0">file.name))</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">alert(`Bilden</span><span class="c4">&nbsp;</span><span class="c3">&quot;</span><span class="c0">${file.name}</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">&auml;r</span><span class="c4">&nbsp;</span><span class="c0">redan</span><span class="c4">&nbsp;</span><span class="c0">&ouml;ppen.`);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">return;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">reader</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">new</span><span class="c4">&nbsp;</span><span class="c0">FileReader();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">reader.onload</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">(event)</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">img</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">new</span><span class="c4">&nbsp;</span><span class="c0">Image();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">img.onload</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">()</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">imageId</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">`img-${Date.now()}-${Math.random()}`;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">newImage</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">id:</span><span class="c4">&nbsp;</span><span class="c0">imageId,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">name:</span><span class="c4">&nbsp;</span><span class="c0">file.name,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">originalElement:</span><span class="c4">&nbsp;</span><span class="c0">img,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">currentElement:</span><span class="c4">&nbsp;</span><span class="c0">img,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">filters:</span><span class="c4">&nbsp;</span><span class="c0">getDefaultFilters(),</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">focus:</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">point:</span><span class="c4">&nbsp;</span><span class="c0">null,</span><span class="c4">&nbsp;</span><span class="c0">radius:</span><span class="c4">&nbsp;</span><span class="c4 c9">150</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">blur:</span><span class="c4">&nbsp;</span><span class="c4 c9">5</span><span class="c4">&nbsp;</span><span class="c0">},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">canvas:</span><span class="c4">&nbsp;</span><span class="c0">null,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">};</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.images.push(newImage);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">createCanvasForImage(newImage);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">switchTab(imageId);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">};</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">img.src</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">event.target.result;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">};</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">reader.readAsDataURL(file);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">});</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">e.target.value</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c3">&#39;&#39;</span><span class="c0">;</span><span class="c2">&nbsp;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">createCanvasForImage(imageObject)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">canvas</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.createElement(</span><span class="c3">&#39;</span><span class="c0">canvas</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">canvas.id</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">`canvas-${imageObject.id}`;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">canvas.classList.add(</span><span class="c3">&#39;</span><span class="c0">hidden</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">workspace.appendChild(canvas);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">imageObject.canvas</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">canvas;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">updateCanvas(imageObject);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">updateCanvas(imageObject)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">img</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">imageObject.currentElement;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">canvas</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">imageObject.canvas;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">canvas.width</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">img.width;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">canvas.height</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">img.height;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">redrawCanvas(imageObject);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">switchTab(imageId)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(appState.activeTool)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">toggleTool(appState.activeTool);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.activeImageId</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">imageId;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">render();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">closeTab(imageId)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">imageIndex</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">appState.images.findIndex(img</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">img.id</span><span class="c4">&nbsp;</span><span class="c0">===</span><span class="c4">&nbsp;</span><span class="c0">imageId);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(imageIndex</span><span class="c4">&nbsp;</span><span class="c0">&gt;</span><span class="c4">&nbsp;</span><span class="c4 c9">-1</span><span class="c0">)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.images.splice(imageIndex,</span><span class="c4">&nbsp;</span><span class="c4 c9">1</span><span class="c0">)[</span><span class="c4 c9">0</span><span class="c0">].canvas.remove();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(appState.activeImageId</span><span class="c4">&nbsp;</span><span class="c0">===</span><span class="c4">&nbsp;</span><span class="c0">imageId)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.activeImageId</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">appState.images.length</span><span class="c4">&nbsp;</span><span class="c0">&gt;</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c4">&nbsp;</span><span class="c0">?</span><span class="c4">&nbsp;</span><span class="c0">appState.images[appState.images.length</span><span class="c4">&nbsp;</span><span class="c0">-</span><span class="c4">&nbsp;</span><span class="c4 c9">1</span><span class="c0">].id</span><span class="c4">&nbsp;</span><span class="c0">:</span><span class="c4">&nbsp;</span><span class="c0">null;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">render();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">redrawActiveCanvas()</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">activeImage</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">getActiveImage();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(activeImage)</span><span class="c4">&nbsp;</span><span class="c0">redrawCanvas(activeImage);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">drawCanvasContent(imageObject)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(!imageObject</span><span class="c4">&nbsp;</span><span class="c0">||</span><span class="c4">&nbsp;</span><span class="c0">!imageObject.canvas)</span><span class="c4">&nbsp;</span><span class="c0">return;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">ctx</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">imageObject.canvas.getContext(</span><span class="c3">&#39;</span><span class="c4 c9">2d</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">img</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">imageObject.currentElement;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.clearRect(</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">ctx.canvas.width,</span><span class="c4">&nbsp;</span><span class="c0">ctx.canvas.height);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(appState.activeTool</span><span class="c4">&nbsp;</span><span class="c0">===</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">focus</span><span class="c3">&#39;</span><span class="c4">&nbsp;</span><span class="c4 c10 c8">&amp;&amp; imageObject.id === appState.activeImageId) {</span></p><p class="c1"><span class="c4 c8">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const focus = imageObject.focus;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">focus.radius</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">focusRadiusSlider.valueAsNumber;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">focus.blur</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">focusBlurSlider.valueAsNumber;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.filter</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">buildFilterString(imageObject.filters);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.drawImage(img,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(focus.point</span><span class="c4">&nbsp;</span><span class="c4 c10 c8">&amp;&amp; focus.blur &gt; 0) {</span></p><p class="c1"><span class="c4 c8">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ctx.save();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.filter</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">`blur(${focus.blur}px)</span><span class="c4">&nbsp;</span><span class="c0">${ctx.filter}`;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.globalCompositeOperation</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">source-atop</span><span class="c3">&#39;</span><span class="c0">;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.beginPath();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.arc(focus.point.x,</span><span class="c4">&nbsp;</span><span class="c0">focus.point.y,</span><span class="c4">&nbsp;</span><span class="c0">focus.radius,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">Math.PI</span><span class="c4">&nbsp;</span><span class="c0">*</span><span class="c4">&nbsp;</span><span class="c4 c9">2</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">true);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.rect(ctx.canvas.width,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">-ctx.canvas.width,</span><span class="c4">&nbsp;</span><span class="c0">ctx.canvas.height);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.fill();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.drawImage(img,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.restore();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span><span class="c4">&nbsp;</span><span class="c0">else</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.filter</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">buildFilterString(imageObject.filters);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.drawImage(img,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">redrawCanvas(imageObject)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">drawCanvasContent(imageObject);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(appState.activeTool</span><span class="c4">&nbsp;</span><span class="c0">===</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">crop</span><span class="c3">&#39;</span><span class="c4">&nbsp;</span><span class="c4 c10 c8">&amp;&amp; appState.cropBox &amp;&amp; imageObject.id === appState.activeImageId) {</span></p><p class="c1"><span class="c4 c8">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const ctx = imageObject.canvas.getContext(&#39;2d&#39;);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">drawCropBox(ctx);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">buildFilterString(filters)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">return</span><span class="c4">&nbsp;</span><span class="c0">`</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">brightness(${filters.brightness}%)</span><span class="c2">&nbsp;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">contrast(${filters.contrast}%)</span><span class="c2">&nbsp;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">saturate(${filters.saturate}%)</span><span class="c2">&nbsp;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">grayscale(${filters.grayscale}%)</span><span class="c2">&nbsp;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">sepia(${filters.sepia}%)</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">`;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">resetActiveImage()</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">activeImage</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">getActiveImage();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(!activeImage)</span><span class="c4">&nbsp;</span><span class="c0">return;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeImage.filters</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">getDefaultFilters();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeImage.focus</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">point:</span><span class="c4">&nbsp;</span><span class="c0">null,</span><span class="c4">&nbsp;</span><span class="c0">radius:</span><span class="c4">&nbsp;</span><span class="c4 c9">150</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">blur:</span><span class="c4">&nbsp;</span><span class="c4 c9">5</span><span class="c4">&nbsp;</span><span class="c0">};</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeImage.currentElement</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">activeImage.originalElement;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(appState.activeTool)</span><span class="c4">&nbsp;</span><span class="c0">toggleTool(appState.activeTool);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">updateCanvas(activeImage);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">render();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">downloadActiveImage()</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">activeImage</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">getActiveImage();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(!activeImage)</span><span class="c4">&nbsp;</span><span class="c0">return;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">link</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.createElement(</span><span class="c3">&#39;</span><span class="c0">a</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">link.download</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">`redigerad-${activeImage.name}`;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">link.href</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">activeImage.canvas.toDataURL(</span><span class="c3">&#39;</span><span class="c0">image/png</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">link.click();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">getActiveImage()</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">return</span><span class="c4">&nbsp;</span><span class="c0">appState.images.find(img</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">img.id</span><span class="c4">&nbsp;</span><span class="c0">===</span><span class="c4">&nbsp;</span><span class="c0">appState.activeImageId)</span><span class="c4">&nbsp;</span><span class="c0">||</span><span class="c4">&nbsp;</span><span class="c0">null;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">getDefaultFilters()</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">return</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">brightness:</span><span class="c4">&nbsp;</span><span class="c4 c9">100</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">contrast:</span><span class="c4">&nbsp;</span><span class="c4 c9">100</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">saturate:</span><span class="c4">&nbsp;</span><span class="c4 c9">100</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">grayscale:</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">sepia:</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c4">&nbsp;</span><span class="c0">};</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">----</span><span class="c4">&nbsp;</span><span class="c0">VERKTYGSFUNKTIONER</span><span class="c4">&nbsp;</span><span class="c0">----</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">[FIX]</span><span class="c4">&nbsp;</span><span class="c0">Ny</span><span class="c4">&nbsp;</span><span class="c0">funktion</span><span class="c4">&nbsp;</span><span class="c0">f&ouml;r</span><span class="c4">&nbsp;</span><span class="c0">att</span><span class="c4">&nbsp;</span><span class="c0">uppdatera</span><span class="c4">&nbsp;</span><span class="c0">state</span><span class="c4">&nbsp;</span><span class="c0">fr&aring;n</span><span class="c4">&nbsp;</span><span class="c0">UI-reglagen</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">updateFiltersFromUI()</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">activeImage</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">getActiveImage();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(!activeImage)</span><span class="c4">&nbsp;</span><span class="c0">return;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeImage.filters.brightness</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">brightness</span><span class="c3">&#39;</span><span class="c0">).valueAsNumber</span><span class="c4">&nbsp;</span><span class="c0">+</span><span class="c4">&nbsp;</span><span class="c4 c9">100</span><span class="c0">;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeImage.filters.contrast</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">contrast</span><span class="c3">&#39;</span><span class="c0">).valueAsNumber</span><span class="c4">&nbsp;</span><span class="c0">+</span><span class="c4">&nbsp;</span><span class="c4 c9">100</span><span class="c0">;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeImage.filters.saturate</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">saturate</span><span class="c3">&#39;</span><span class="c0">).valueAsNumber;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeImage.filters.grayscale</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">grayscale</span><span class="c3">&#39;</span><span class="c0">).valueAsNumber;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeImage.filters.sepia</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">sepia</span><span class="c3">&#39;</span><span class="c0">).valueAsNumber;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">toggleTool(toolName)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">currentlyActive</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">appState.activeTool</span><span class="c4">&nbsp;</span><span class="c0">===</span><span class="c4">&nbsp;</span><span class="c0">toolName;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(appState.activeTool)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">document.getElementById(`${appState.activeTool}-tool-btn`).classList.remove(</span><span class="c3">&#39;</span><span class="c0">active</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">document.getElementById(`${appState.activeTool}-controls`).classList.add(</span><span class="c3">&#39;</span><span class="c0">hidden</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">workspace.classList.remove(</span><span class="c3">&#39;</span><span class="c0">cropping</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.cropBox</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">null;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.activeTool</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">null;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(!currentlyActive)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.activeTool</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">toolName;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">document.getElementById(`${toolName}-tool-btn`).classList.add(</span><span class="c3">&#39;</span><span class="c0">active</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">document.getElementById(`${toolName}-controls`).classList.remove(</span><span class="c3">&#39;</span><span class="c0">hidden</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(toolName</span><span class="c4">&nbsp;</span><span class="c0">===</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">crop</span><span class="c3">&#39;</span><span class="c0">)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">workspace.classList.add(</span><span class="c3">&#39;</span><span class="c0">cropping</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">redrawActiveCanvas();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">getMousePos(canvas,</span><span class="c4">&nbsp;</span><span class="c0">evt)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">rect</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">canvas.getBoundingClientRect();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">scaleX</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">canvas.width</span><span class="c4">&nbsp;</span><span class="c0">/</span><span class="c4">&nbsp;</span><span class="c0">rect.width;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">scaleY</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">canvas.height</span><span class="c4">&nbsp;</span><span class="c0">/</span><span class="c4">&nbsp;</span><span class="c0">rect.height;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">return</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">x:</span><span class="c4">&nbsp;</span><span class="c0">(evt.clientX</span><span class="c4">&nbsp;</span><span class="c0">-</span><span class="c4">&nbsp;</span><span class="c0">rect.left)</span><span class="c4">&nbsp;</span><span class="c0">*</span><span class="c4">&nbsp;</span><span class="c0">scaleX,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">y:</span><span class="c4">&nbsp;</span><span class="c0">(evt.clientY</span><span class="c4">&nbsp;</span><span class="c0">-</span><span class="c4">&nbsp;</span><span class="c0">rect.top)</span><span class="c4">&nbsp;</span><span class="c0">*</span><span class="c4">&nbsp;</span><span class="c0">scaleY</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">};</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">handleWorkspaceMouseDown(e)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(appState.activeTool</span><span class="c4">&nbsp;</span><span class="c0">!==</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">crop</span><span class="c3">&#39;</span><span class="c4">&nbsp;</span><span class="c0">||</span><span class="c4">&nbsp;</span><span class="c0">!getActiveImage())</span><span class="c4">&nbsp;</span><span class="c0">return;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.isCropping</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">true;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">pos</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">getMousePos(getActiveImage().canvas,</span><span class="c4">&nbsp;</span><span class="c0">e);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.cropBox</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">startX:</span><span class="c4">&nbsp;</span><span class="c0">pos.x,</span><span class="c4">&nbsp;</span><span class="c0">startY:</span><span class="c4">&nbsp;</span><span class="c0">pos.y,</span><span class="c4">&nbsp;</span><span class="c0">endX:</span><span class="c4">&nbsp;</span><span class="c0">pos.x,</span><span class="c4">&nbsp;</span><span class="c0">endY:</span><span class="c4">&nbsp;</span><span class="c0">pos.y</span><span class="c4">&nbsp;</span><span class="c0">};</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">handleWorkspaceMouseMove(e)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(!appState.isCropping</span><span class="c4">&nbsp;</span><span class="c0">||</span><span class="c4">&nbsp;</span><span class="c0">!appState.cropBox)</span><span class="c4">&nbsp;</span><span class="c0">return;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">pos</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">getMousePos(getActiveImage().canvas,</span><span class="c4">&nbsp;</span><span class="c0">e);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.cropBox.endX</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">pos.x;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.cropBox.endY</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">pos.y;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">redrawActiveCanvas();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">handleWorkspaceMouseUp(e)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.isCropping</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">false;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">drawCropBox(ctx)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">box</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">appState.cropBox;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(!box)</span><span class="c4">&nbsp;</span><span class="c0">return;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">x</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">Math.min(box.startX,</span><span class="c4">&nbsp;</span><span class="c0">box.endX);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">y</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">Math.min(box.startY,</span><span class="c4">&nbsp;</span><span class="c0">box.endY);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">width</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">Math.abs(box.startX</span><span class="c4">&nbsp;</span><span class="c0">-</span><span class="c4">&nbsp;</span><span class="c0">box.endX);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">height</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">Math.abs(box.startY</span><span class="c4">&nbsp;</span><span class="c0">-</span><span class="c4">&nbsp;</span><span class="c0">box.endY);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.save();</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.beginPath();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.rect(</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">ctx.canvas.width,</span><span class="c4">&nbsp;</span><span class="c0">ctx.canvas.height);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.moveTo(x,</span><span class="c4">&nbsp;</span><span class="c0">y);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.lineTo(x,</span><span class="c4">&nbsp;</span><span class="c0">y</span><span class="c4">&nbsp;</span><span class="c0">+</span><span class="c4">&nbsp;</span><span class="c0">height);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.lineTo(x</span><span class="c4">&nbsp;</span><span class="c0">+</span><span class="c4">&nbsp;</span><span class="c0">width,</span><span class="c4">&nbsp;</span><span class="c0">y</span><span class="c4">&nbsp;</span><span class="c0">+</span><span class="c4">&nbsp;</span><span class="c0">height);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.lineTo(x</span><span class="c4">&nbsp;</span><span class="c0">+</span><span class="c4">&nbsp;</span><span class="c0">width,</span><span class="c4">&nbsp;</span><span class="c0">y);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.closePath();</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.fillStyle</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">rgba(</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">.</span><span class="c4 c9">75</span><span class="c0">)</span><span class="c3">&#39;</span><span class="c0">;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.fill(</span><span class="c3">&#39;</span><span class="c0">evenodd</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.strokeStyle</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">rgba(</span><span class="c4 c9">255</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">255</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">255</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">.</span><span class="c4 c9">9</span><span class="c0">)</span><span class="c3">&#39;</span><span class="c0">;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.lineWidth</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c4 c9">2</span><span class="c0">;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.strokeRect(x,</span><span class="c4">&nbsp;</span><span class="c0">y,</span><span class="c4">&nbsp;</span><span class="c0">width,</span><span class="c4">&nbsp;</span><span class="c0">height);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ctx.restore();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">applyCrop()</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">activeImage</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">getActiveImage();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">box</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">appState.cropBox;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(!activeImage</span><span class="c4">&nbsp;</span><span class="c0">||</span><span class="c4">&nbsp;</span><span class="c0">!box)</span><span class="c4">&nbsp;</span><span class="c0">return;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">x</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">Math.min(box.startX,</span><span class="c4">&nbsp;</span><span class="c0">box.endX);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">y</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">Math.min(box.startY,</span><span class="c4">&nbsp;</span><span class="c0">box.endY);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">width</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">Math.abs(box.startX</span><span class="c4">&nbsp;</span><span class="c0">-</span><span class="c4">&nbsp;</span><span class="c0">box.endX);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">height</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">Math.abs(box.startY</span><span class="c4">&nbsp;</span><span class="c0">-</span><span class="c4">&nbsp;</span><span class="c0">box.endY);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(width</span><span class="c4">&nbsp;</span><span class="c0">&lt;</span><span class="c4">&nbsp;</span><span class="c4 c9">1</span><span class="c4">&nbsp;</span><span class="c0">||</span><span class="c4">&nbsp;</span><span class="c0">height</span><span class="c4">&nbsp;</span><span class="c0">&lt;</span><span class="c4">&nbsp;</span><span class="c4 c9">1</span><span class="c0">)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">toggleTool(</span><span class="c3">&#39;</span><span class="c0">crop</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">return;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">drawCanvasContent(activeImage);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">tempCanvas</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.createElement(</span><span class="c3">&#39;</span><span class="c0">canvas</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">tempCanvas.width</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">width;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">tempCanvas.height</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">height;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">tempCtx</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">tempCanvas.getContext(</span><span class="c3">&#39;</span><span class="c4 c9">2d</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">tempCtx.drawImage(activeImage.canvas,</span><span class="c4">&nbsp;</span><span class="c0">x,</span><span class="c4">&nbsp;</span><span class="c0">y,</span><span class="c4">&nbsp;</span><span class="c0">width,</span><span class="c4">&nbsp;</span><span class="c0">height,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">width,</span><span class="c4">&nbsp;</span><span class="c0">height);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">newImageElement</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">new</span><span class="c4">&nbsp;</span><span class="c0">Image();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">newImageElement.onload</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">()</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeImage.currentElement</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">newImageElement;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeImage.focus.point</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">null;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">toggleTool(</span><span class="c3">&#39;</span><span class="c0">crop</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">updateCanvas(activeImage);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">render();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">};</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">newImageElement.src</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">tempCanvas.toDataURL();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">handleWorkspaceClick(e)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(appState.activeTool</span><span class="c4">&nbsp;</span><span class="c0">!==</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">focus</span><span class="c3">&#39;</span><span class="c4">&nbsp;</span><span class="c0">||</span><span class="c4">&nbsp;</span><span class="c0">!getActiveImage())</span><span class="c4">&nbsp;</span><span class="c0">return;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">activeImage</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">getActiveImage();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">activeImage.focus.point</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">getMousePos(activeImage.canvas,</span><span class="c4">&nbsp;</span><span class="c0">e);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">redrawActiveCanvas();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">----</span><span class="c4">&nbsp;</span><span class="c0">RENDERINGSFUNKTIONER</span><span class="c4">&nbsp;</span><span class="c0">----</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">updateFilterControls()</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">activeImage</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">getActiveImage();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(!activeImage)</span><span class="c4">&nbsp;</span><span class="c0">return;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">f</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">activeImage.filters;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">brightness</span><span class="c3">&#39;</span><span class="c0">).value</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">f.brightness</span><span class="c4">&nbsp;</span><span class="c0">-</span><span class="c4">&nbsp;</span><span class="c4 c9">100</span><span class="c0">;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">contrast</span><span class="c3">&#39;</span><span class="c0">).value</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">f.contrast</span><span class="c4">&nbsp;</span><span class="c0">-</span><span class="c4">&nbsp;</span><span class="c4 c9">100</span><span class="c0">;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">saturate</span><span class="c3">&#39;</span><span class="c0">).value</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">f.saturate;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">grayscale</span><span class="c3">&#39;</span><span class="c0">).value</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">f.grayscale;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">document.getElementById(</span><span class="c3">&#39;</span><span class="c0">sepia</span><span class="c3">&#39;</span><span class="c0">).value</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">f.sepia;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">focus</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">activeImage.focus;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">focusRadiusSlider.value</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">focus.radius;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">focusBlurSlider.value</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">focus.blur;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">function</span><span class="c4">&nbsp;</span><span class="c0">render()</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">activeImage</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">getActiveImage();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">Flikar</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">tabsContainer.innerHTML</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c3">&#39;&#39;</span><span class="c0">;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">appState.images.forEach(img</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">tab</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.createElement(</span><span class="c3">&#39;</span><span class="c0">div</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">tab.className</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">`tab</span><span class="c4">&nbsp;</span><span class="c0">flex</span><span class="c4">&nbsp;</span><span class="c0">items-center</span><span class="c4">&nbsp;</span><span class="c0">gap-2</span><span class="c4">&nbsp;</span><span class="c0">px-4</span><span class="c4">&nbsp;</span><span class="c0">py-2</span><span class="c4">&nbsp;</span><span class="c0">cursor-pointer</span><span class="c4">&nbsp;</span><span class="c0">border-b-2</span><span class="c4">&nbsp;</span><span class="c0">border-transparent</span><span class="c4">&nbsp;</span><span class="c0">text-sm</span><span class="c4">&nbsp;</span><span class="c0">font-medium</span><span class="c4">&nbsp;</span><span class="c0">transition-colors</span><span class="c4">&nbsp;</span><span class="c0">duration-200</span><span class="c4">&nbsp;</span><span class="c0">hover:bg-gray-700`;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">tab.dataset.imageId</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">img.id;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(img.id</span><span class="c4">&nbsp;</span><span class="c0">===</span><span class="c4">&nbsp;</span><span class="c0">appState.activeImageId)</span><span class="c4">&nbsp;</span><span class="c0">tab.classList.add(</span><span class="c3">&#39;</span><span class="c0">active</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">text-white</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">else</span><span class="c4">&nbsp;</span><span class="c0">tab.classList.add(</span><span class="c3">&#39;</span><span class="c0">text-gray-400</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">tabName</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.createElement(</span><span class="c3">&#39;</span><span class="c0">span</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">tabName.textContent</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">img.name.length</span><span class="c4">&nbsp;</span><span class="c0">&gt;</span><span class="c4">&nbsp;</span><span class="c4 c9">15</span><span class="c4">&nbsp;</span><span class="c0">?</span><span class="c4">&nbsp;</span><span class="c0">`${img.name.substring(</span><span class="c4 c9">0</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c4 c9">12</span><span class="c0">)}...`</span><span class="c4">&nbsp;</span><span class="c0">:</span><span class="c4">&nbsp;</span><span class="c0">img.name;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">tabName.title</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">img.name;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">const</span><span class="c4">&nbsp;</span><span class="c0">closeBtn</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c0">document.createElement(</span><span class="c3">&#39;</span><span class="c0">button</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">closeBtn.innerHTML</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c3">&#39;</span><span class="c0">&lt;i</span><span class="c4">&nbsp;</span><span class="c0">data-lucide=</span><span class="c3">&quot;</span><span class="c0">x</span><span class="c3">&quot;</span><span class="c4">&nbsp;</span><span class="c0">class=</span><span class="c3">&quot;</span><span class="c0">w-4</span><span class="c4">&nbsp;</span><span class="c0">h-4</span><span class="c4">&nbsp;</span><span class="c0">text-gray-500</span><span class="c4">&nbsp;</span><span class="c0">hover:text-white</span><span class="c3">&quot;</span><span class="c0">&gt;&lt;/i&gt;</span><span class="c3">&#39;</span><span class="c0">;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">closeBtn.className</span><span class="c4">&nbsp;</span><span class="c0">=</span><span class="c4">&nbsp;</span><span class="c3">&quot;</span><span class="c0">p-1</span><span class="c4">&nbsp;</span><span class="c0">rounded-full</span><span class="c4">&nbsp;</span><span class="c0">hover:bg-gray-600</span><span class="c3">&quot;</span><span class="c0">;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">tab.append(tabName,</span><span class="c4">&nbsp;</span><span class="c0">closeBtn);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">tab.addEventListener(</span><span class="c3">&#39;</span><span class="c0">click</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">(e)</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(e.target.closest(</span><span class="c3">&#39;</span><span class="c0">button</span><span class="c3">&#39;</span><span class="c0">)</span><span class="c4">&nbsp;</span><span class="c0">!==</span><span class="c4">&nbsp;</span><span class="c0">closeBtn)</span><span class="c4">&nbsp;</span><span class="c0">switchTab(img.id);</span><span class="c4">&nbsp;</span><span class="c0">});</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">closeBtn.addEventListener(</span><span class="c3">&#39;</span><span class="c0">click</span><span class="c3">&#39;</span><span class="c0">,</span><span class="c4">&nbsp;</span><span class="c0">(e)</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">{</span><span class="c4">&nbsp;</span><span class="c0">e.stopPropagation();</span><span class="c4">&nbsp;</span><span class="c0">closeTab(img.id);</span><span class="c4">&nbsp;</span><span class="c0">});</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">tabsContainer.appendChild(tab);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">});</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">lucide.createIcons();</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">Arbetsyta</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">workspace.querySelectorAll(</span><span class="c3">&#39;</span><span class="c0">canvas</span><span class="c3">&#39;</span><span class="c0">).forEach(c</span><span class="c4">&nbsp;</span><span class="c0">=&gt;</span><span class="c4">&nbsp;</span><span class="c0">c.classList.add(</span><span class="c3">&#39;</span><span class="c0">hidden</span><span class="c3">&#39;</span><span class="c0">));</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(activeImage</span><span class="c4">&nbsp;</span><span class="c4 c8 c10">&amp;&amp; activeImage.canvas) {</span></p><p class="c1"><span class="c4 c8">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; activeImage.canvas.classList.remove(&#39;hidden&#39;);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">welcomeMessage.classList.add(</span><span class="c3">&#39;</span><span class="c0">hidden</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span><span class="c4">&nbsp;</span><span class="c0">else</span><span class="c4">&nbsp;</span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(appState.images.length</span><span class="c4">&nbsp;</span><span class="c0">===</span><span class="c4">&nbsp;</span><span class="c4 c9">0</span><span class="c0">)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">welcomeMessage.classList.remove(</span><span class="c3">&#39;</span><span class="c0">hidden</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">Sidopanel</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">if</span><span class="c4">&nbsp;</span><span class="c0">(activeImage)</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">noImageMessage.classList.add(</span><span class="c3">&#39;</span><span class="c0">hidden</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">toolsContainer.classList.remove(</span><span class="c3">&#39;</span><span class="c0">hidden</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">toolsContainer.classList.add(</span><span class="c3">&#39;</span><span class="c0">flex</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">updateFilterControls();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">//</span><span class="c4">&nbsp;</span><span class="c0">[FIX]</span><span class="c4">&nbsp;</span><span class="c0">Den</span><span class="c4">&nbsp;</span><span class="c0">felaktiga</span><span class="c4">&nbsp;</span><span class="c0">kodblocket</span><span class="c4">&nbsp;</span><span class="c0">har</span><span class="c4">&nbsp;</span><span class="c0">tagits</span><span class="c4">&nbsp;</span><span class="c0">bort</span><span class="c4">&nbsp;</span><span class="c0">h&auml;rifr&aring;n.</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">redrawActiveCanvas();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span><span class="c4">&nbsp;</span><span class="c0">else</span><span class="c4">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">noImageMessage.classList.remove(</span><span class="c3">&#39;</span><span class="c0">hidden</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">toolsContainer.classList.add(</span><span class="c3">&#39;</span><span class="c0">hidden</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">toolsContainer.classList.remove(</span><span class="c3">&#39;</span><span class="c0">flex</span><span class="c3">&#39;</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">});</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; </span><span class="c0">&lt;/script&gt;</span></p><p class="c1"><span class="c0">&lt;/body&gt;</span></p><p class="c1"><span class="c0">&lt;/html&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c6">&#60418;</span></p></body></html>